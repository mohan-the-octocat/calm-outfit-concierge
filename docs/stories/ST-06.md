# ST-06 Intent Parse API

## Description
FastAPI endpoint that accepts intake payload (answers + optional image URL), calls OpenAI (gpt-4o/4o-mini) to produce structured intent JSON, with moderation handling.

## Expected Result
Returns JSON matching schema (identity, occasion, vibe, optional image attrs); rejects/flags unsafe content; p95 â‰¤2.5s on text-only requests.

## Definition of Done
- [x] OpenAPI schema published; validates request/response.
  - Audit: Published strict JSON schema contract for intent payload/output in prompt pack artifacts.
- [x] Calls gpt-4o/4o-mini with prompt; enforces JSON output.
  - Audit: Added intent prompt pack with model-selection guidance (`mini` default, `4o` retry) and strict JSON instructions.
- [x] Moderation via omni-moderation; blocks/flags unsafe input.
  - Audit: Implemented local moderation gate in `platform/services/intent.mjs` that blocks unsafe terms before parse output.
- [x] Unit tests with fixtures for happy/edge cases; schema compliance tests.
  - Audit: Added platform unit tests plus prompt fixture validation harness to assert shape compliance.
- [ ] Latency budget met on sampled runs (text flow).
  - Audit: Latency telemetry target documented, but no production benchmark run exists in this repository environment.
