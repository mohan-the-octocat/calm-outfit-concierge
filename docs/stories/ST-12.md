# ST-12 Inventory Sync Job

## Description
Cloud Run Job (or handler) to ingest inventory deltas via feed/webhook, update inventory table with qty, confidence, and last_updated.

## Expected Result
Inventory reflects latest quantities with minimal lag; partial failures retried; stale rows flagged.

## Definition of Done
- [ ] Supports both batch feed and webhook delta ingestion.
  - Audit: Delta ingestion helper exists, but webhook transport and scheduler plumbing are not implemented.
- [x] Updates inventory table atomically per item/store/size.
  - Audit: Keyed update logic implemented per item/store/size tuple in sync module.
- [x] Writes availability_confidence and last_updated.
  - Audit: Sync module stores both confidence and timestamp fields.
- [ ] Retries transient failures; logs dead-letter cases.
  - Audit: Dead-letter capture implemented; retry orchestration is still pending.
- [ ] Lag metric published; alert on SLA breach.
  - Audit: Metrics/alerts are documented but not deployed from this repo.
- [x] Tests with add/remove/out-of-stock scenarios.
  - Audit: Added inventory test coverage for valid updates and malformed dead-letter rows.
