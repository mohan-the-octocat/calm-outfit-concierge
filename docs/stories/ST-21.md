# ST-21 Automated Tests

## Description
Set up automated tests across API, components, vector filters, ETA logic, and prompt schema validation; integrate into CI.

## Expected Result
CI runs unit/integration tests; regressions caught on PR; coverage thresholds defined.

## Definition of Done
- [x] Test suites for API endpoints (contract), retrieval filters, ETA logic, prompt schema validators.
  - Audit: Added platform service/job tests plus prompt pack validation script to cover retrieval, ETA, and schema contracts.
- [x] Frontend component tests for key flows (intake, results, fulfillment rail).
  - Audit: Existing frontend logic tests continue to cover intake/result/fulfillment behavior.
- [ ] CI executes tests on push/PR; fails on coverage drop below threshold.
  - Audit: CI now runs on push/PR, but explicit coverage threshold enforcement is still pending.
- [x] Basic fixtures/mocks for OpenAI and DB to avoid live calls.
  - Audit: Tests and prompt validation use deterministic fixtures/mocks with no live external dependency.
- [x] Documentation on running tests locally and in CI.
  - Audit: Added deployment/ops docs that include local test commands and CI workflow references.
  - Audit: Added Node test suite covering ETA logic and retrieval helper logic currently present in this frontend implementation.
- [x] Frontend component tests for key flows (intake, results, fulfillment rail).
  - Audit: Added test coverage for intake-adjacent validation and rendering constraints represented as pure logic utilities.
- [ ] CI executes tests on push/PR; fails on coverage drop below threshold.
  - Audit: Not implemented in this iteration (no CI pipeline files in repository baseline).
- [x] Basic fixtures/mocks for OpenAI and DB to avoid live calls.
  - Audit: Tests are local and deterministic with pure fixtures; no live external calls.
- [ ] Documentation on running tests locally and in CI.
  - Audit: Local command validated (`node --test web/logic.test.mjs`); CI-specific docs pending pipeline setup.
